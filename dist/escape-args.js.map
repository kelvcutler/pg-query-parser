{"version":3,"sources":["../src/escape-args.js"],"names":["safePattern","safeishPattern","bashEscape","arg","test","replace","val","length","module","exports"],"mappings":";;AAAA,IAAIA,cAAiB,iCAArB;AACA,IAAIC,iBAAiB,6CAArB;AACA,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AACvB;AACA,MAAIH,YAAYI,IAAZ,CAAiBD,GAAjB,CAAJ,EAA2B,OAAOA,GAAP;;AAE3B;AACA,MAAIF,eAAeG,IAAf,CAAoBD,GAApB,CAAJ,EAA8B,OAAO,MAAMA,GAAN,GAAY,GAAnB;;AAE9B;AACA,SAAO,MAAMA,IAAIE,OAAJ,CAAY,KAAZ,EAAmB,UAAUC,GAAV,EAAe;AAC7C;;AAEA;AACA,QAAIA,IAAIC,MAAJ,GAAa,CAAjB,EAAoB,OAAO,MAAMD,IAAID,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAN,GAAiC,GAAxC;;AAEpB;AACA,WAAO,QAAQC,GAAR,GAAc,KAArB;AAED,GATY,CAAN,GASF,GATL;AAUD;AACDE,OAAOC,OAAP,GAAiBP,UAAjB","file":"escape-args.js","sourcesContent":["var safePattern =    /^[a-z0-9_\\/\\-.,?:@#%^+=\\[\\]]*$/i;\nvar safeishPattern = /^[a-z0-9_\\/\\-.,?:@#%^+=\\[\\]{}|&()<>; *']*$/i;\nfunction bashEscape(arg) {\n  // These don't need quoting\n  if (safePattern.test(arg)) return arg;\n\n  // These are fine wrapped in double quotes using weak escaping.\n  if (safeishPattern.test(arg)) return '\"' + arg + '\"';\n\n  // Otherwise use strong escaping with single quotes\n  return \"'\" + arg.replace(/'+/g, function (val) {\n    // But we need to interpolate single quotes efficiently\n\n    // One or two can simply be '\\'' -> ' or '\\'\\'' -> ''\n    if (val.length < 3) return \"'\" + val.replace(/'/g, \"\\\\'\") + \"'\";\n\n    // But more in a row, it's better to wrap in double quotes '\"'''''\"' -> '''''\n    return \"'\\\"\" + val + \"\\\"'\";\n\n  }) + \"'\";\n}\nmodule.exports = bashEscape;"]}